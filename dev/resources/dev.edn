{:duct.core/environment :development
 :duct.core/include ["yki/config"]
 :duct.core/project-ns yki
 :duct.database.sql/hikaricp {:adapter "postgresql"
                              :database-name "yki"
                              :server-name "localhost"
                              :port-number "5432"
                              :username "admin"
                              :password "admin"}

 :yki.middleware.access-log/with-logging {:env "dev"}

 :yki.util/url-helper {:virkailija-host "virkailija.untuvaopintopolku.fi"
                       :liiteri-host     "virkailija.untuvaopintopolku.fi"
                       :tunnistus-host "tunnistus.untuvaopintopolku.fi"
                       :yki-host    "http://localhost:8080"}

 :yki.middleware.auth/with-authentication
 {:url-helper #ig/ref :yki.util/url-helper
  :session-config {:key "ad7tbRZIG839gDo2"
                   :cookie-attrs {:max-age 28800
                                  :http-only true
                                  :secure false
                                  :path "/yki"}}}

 :yki.middleware.no-auth/with-authentication
 {:session-config {:key "ad7tbRZIG839gDo2"
                   :cookie-attrs {:max-age 28800
                                  :http-only true
                                  :secure false
                                  :path "/yki"}}}

 :yki.handler/organizer {:db #ig/ref :duct.database/sql
                         :url-helper #ig/ref :yki.util/url-helper
                         :file-handler #ig/ref :yki.handler/file
                         :access-log #ig/ref :yki.middleware.access-log/with-logging
                         :auth #ig/ref :yki.middleware.auth/with-authentication}}

